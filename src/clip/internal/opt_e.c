#include "opt_e.h"

#include <ctype.h>
#include <string.h>
#include <linux/limits.h>

/// Проверяет корректность расширения файла, переданного в аргумент `-e`.
///
/// Условия валидности:
/// - строка не должна быть `NULL`
/// - строка не должна быть пустой
/// - длина строки должна быть меньше `NAME_MAX`
/// - строка должна состоять **только** из буквенно-цифровых символов (A-Z, a-z, 0-9)
///
/// Расширения, содержащие точки (`.`), пробелы, спецсимволы — считаются недопустимыми.
///
/// @param arg Строка с расширением файла (например, "txt").
/// @return 0 — если валидно, -1 — если невалидно.
int
arge(const char *arg)
{
        size_t len;
        if (NULL == arg || 0 == (len = strlen(arg)) || NAME_MAX <= len)
        {
                return -1;
        }
        const char *ch = arg;
        while ('\0' != *ch)
        {
                if (!isalnum(*ch))
                {
                        return -1;
                }
                ++ch;
        }
        return 0;
}
